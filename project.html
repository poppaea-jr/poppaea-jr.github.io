<!DOCTYPE html>
<html>

<!DOCTYPE html>
   <html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Poppaea JR</title>
      
        <link rel="stylesheet" href="index.css">
      
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap');
        </style>
      
      <!-- The next three lines allow the Vega ehitembed-->
      <script src="https://cdn.jsdelivr.net/npm/vega@5.17.0"></script>
      <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.17.0"></script>
      <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script>
      
      </head>
<body>
      <h1> My Project Page </h1>

      <div class="wrap">
        <p> Head back to my homework portfolio <a class="textLink" href="index">here</a>.</p>
        
<h3>Does the sentiment presented in online forums influence the stock market?</h3>
      
<p> To analyze the most recent changes in online sentiment, I wanted to access my text data using scraping or API.  I chose to use the Python Reddit API Wrapper (PRAW) to gather text from the r/stocks subreddit, as Reddit makes itâ€™s data particularly accessible. </p>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>DateTime</th>
      <th>text</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2022-01-07 16:13:23</td>
      <td>Roblox (RBLX) Stock Plunges 7% on China App Removal, Seen as 'Incremental Unforeseen Headwind'Shares of Roblox (NYSE:...</td>
    </tr>
    <tr>
      <td>2022-01-07 15:55:48</td>
      <td>Hedge funds are selling tech shares at their fastest pace in a decadeSurging bond yields have triggered hedge funds...</td>
    </tr>
    <tr>
      <td>2022-01-07 15:55:31</td>
      <td>1 Stock, multiple exchanges?I intend to load up on some MSFT on DeGiro, I am a European citizen.\n\nBeing...</td>
    </tr>
    <tr>
      <td>2022-01-07 15:48:26</td>
      <td>1 year vs trailing 12 months on an income statementI wish I could add photos because it would help alot...</td>
    </tr>
    <tr>
      <td>2022-01-07 15:26:15</td>
      <td>$ACY, Aerocentury corp, an empty shell of grandiose promises.**I am short $ACY, and I think the company is...</td>
    </tr>
  </tbody>
</table>

<p>The colab notebook for this PRAW fetch can be found <a href="https://colab.research.google.com/drive/1NxCkHR_M6weHpMxN3s88cJV_gvVfHD_q?usp=sharing">here</a>.</p>

<p> </p>

<p> To compare the sentiment of these posts to the performance of the stock market overall, I chose to consider the closing prices of the S&P500, both because it is an index and because about half of Reddit's users are from US. As I'm particularly interested in how online sentiment creates changes in the stock market, I calculated the percentage changes in this<a href="https://colab.research.google.com/drive/1gjyODYkXdZDXh5aABt-9P6aRxgJhkHfq?usp=sharing"> colab notebook</a>.</p>

<!--Chart 24 - first sentiment polarity -->
<div class="chart" id="chart24">
  <script>     var myChart24 = "charts/SP_Pct_Chn.json";
    vegaEmbed('#chart24', myChart24);
  </script>
</div>

<p>I used the TextBlob library to calculate a polarity score for each text post, with 1 being entirely positive and vice versa.</p>

<!--Chart 21 - first sentiment polarity -->
<div class="chart" id="chart21">
  <script>     var myChart21 = "charts/stocks_Polarity.json";
    vegaEmbed('#chart21', myChart21);
  </script>
</div>
<p><a href="https://colab.research.google.com/drive/1A2LFGAsgmIev6hK05JuAApSLtGbLKhd5?usp=sharing">Colab notebook</a>.</p>

<p>I then performed some data processing in Stata for the largest possible dataset for r/stocks (982 text posts), in order to find the daily average polarity score, the code for which can be found <a href="https://github.com/poppaea-jr/poppaea-jr.github.io/blob/main/daily_polarity.do">here</a>.</p>
<!--Chart 27 - first sentiment polarity -->
<div class="chart" id="chart27">
  <script>     var myChart27 = "charts/daily_r_stocks.json";
    vegaEmbed('#chart27', myChart27);
  </script>
</div>

<p>In order to compare variations in sentiment with those in the market, I computed the percentage changes in sentiment between days against the same for the S&P500 index, in the following <a href="https://colab.research.google.com/drive/1olLnjS3A79EPddlX6vA_BRsR3GQCT6Iv?usp=sharing">Colab notebook.</a></p>

<!--Chart 28 - first sentiment polarity -->
<div class="chart" id="chart28">
  <script>     var myChart28 = "charts/sen_pol.json";
    vegaEmbed('#chart28', myChart28);
  </script>
</div>

<p>The remaining problem now is that my PRAW fetch can only collect around 900 posts, which are simply the most recent. In order to be able to specify the timeframe of the posts, I looked to the <a href="https://pushshift.io/">Pushshift API</a></p>
<p>The limitation of this method is that Pushshift can only pull 100 posts at a time, so I used a loop to circumvent this. Due to the large amount of data being fetched and processed, I chose to use a Jupyter notebook. This notebook streamlines the fetching and polarity calculation of posts for any specified period. <a href="">Download the notebook</a>.</p>





<p>(This chart has polarity scores for the last month (08/12/2021 - 08/01/2022), but the loop took around 2 hours to run. See the <a href="https://colab.research.google.com/drive/1eXVo8NEg0AIMauVrTx4TkMDASwHuXQ9B?usp=sharing">Colab notebook.</a>)</p>
<!--Chart 29 - first sentiment polarity -->
<div class="chart" id="chart29">
  <script>     var myChart29 = "charts/loop_1.json";
    vegaEmbed('#chart29', myChart29);
  </script>
</div>

<p> </p>
<div class="chart" id="chart30">
  <script>     var myChart30 = "charts/aug_jan.json";
    vegaEmbed('#chart30', myChart30);
  </script>
</div>

<p>I have chosen to perform a Granger causality test, with the null hypothesis that sentiment is not predictive of market indicies. In order to perform this test, both of my time series must be stationary.</p>
<p>I used a Dickey Fuller test for stationarity, and for the S&P 500, applied a Dickey Fuller test for stationarity, and applied a log transformation and first differencing to obtain a series centred around 0, without time trend, and with variance independent of time. See the python code for this in <a href="https://colab.research.google.com/drive/1361n5kxDiiUatZiXa6N78e4GwuYZovzq?usp=sharing">Google Colab</a>.</p>

<div class="chart" id="chart31">
  <script>     var myChart31 = "charts/stationary_sp.json";
    vegaEmbed('#chart31', myChart31);
  </script>
</div>

<p>Main sources: Analytics Vidyha</p>

</body>
</html>
