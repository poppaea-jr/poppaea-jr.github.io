<!DOCTYPE html>
<html>

<!DOCTYPE html>
   <html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Poppaea JR</title>
      
        <link rel="stylesheet" href="index.css">
      
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap');
        </style>
      
      <!-- The next three lines allow the Vega ehitembed-->
      <script src="https://cdn.jsdelivr.net/npm/vega@5.17.0"></script>
      <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.17.0"></script>
      <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script>
      
      </head>
<body>
      <h1>Data Science Project Page</h1>

      <div class="wrap">
        <p> Head back to my homework portfolio <a class="textLink" href="index">here</a>.</p>
        
<h3>Does Social Media Influence the Stock Market?</h3>
      
<p>To assess this question, I will perform a Sentiment Analysis on online posts, and compare how these vary over time to fluctuations in the S&P 500 index. I chose to collect my text data from Reddit because it makes it's data particularly accessible through the Python Reddit API Wrapper.</p>

<div class="chart" id="chart21">
  <script>     var myChart21 = "charts/stocks_Polarity.json";
    vegaEmbed('#chart21', myChart21);
  </script>
</div>

<p>The above chart shows my first data pull for this project, the code for which can be found<a href="https://colab.research.google.com/drive/1A2LFGAsgmIev6hK05JuAApSLtGbLKhd5?usp=sharing"> in the colab notebook</a> or <a href="https://github.com/poppaea-jr/poppaea-jr.github.io/blob/main/stocks_fetch_and_pol.ipynb">on github</a>.
The challenge I faced here was that the timeframe of posts cannot be specified in a fetch using standard PRAW, and it will only pull around 900 posts per run. I therefore switched to Pushshift PRAW, however this API was limited to 100 posts per run. I circumvented this using a loop. An example of this notebook, including outputs for one day, can be found <a href="https://github.com/poppaea-jr/poppaea-jr.github.io/blob/main/Example_Notebook_PRAW_Loop.ipynb"> in my Github here</a>. After fetching the posts, the notebook uses TextBlob to assign a polarity value to each,  1 being entirely positive, and -1 being entirely negative. Due to the large amount of data being processed, I chose to run this loop for 1 month intervals, and then merge them <a href="https://colab.research.google.com/drive/1e7s4wn46n7bbQA3g5V2wuPUlwEoeInXr?usp=sharing">in Pandas,</a> see the code <a href="https://github.com/poppaea-jr/poppaea-jr.github.io/blob/main/merging_months.ipynb">in Github</a>.</p>

<!-- Time series chart of sentiment polarity and sp -->

<p>As my aim was to test whether the sentiment displayed in the forum over time influences changes in the market over time. I chose to perform a Granger Causality test, with the null hypothesis that sentiment is not useful in predicting the S&P 500 Index. In order to perform this test, both of my time series needed to be stationary.</p>

<!-- Time series chart of sentiment polarity - now stationary -->

<p>Predictably, the series for S&P 500 Index Values was not stationary. After first-differencing, the series satisfied a Dickey-Fuller test for stationarity: see the <a href="https://colab.research.google.com/drive/1361n5kxDiiUatZiXa6N78e4GwuYZovzq?usp=sharing"> Colab notebook</a>, or view the code <a href="https://github.com/poppaea-jr/poppaea-jr.github.io/blob/main/yfin_stationarity.ipynb">on Github</a>.</p>

<div class="chart" id="chart31">
  <script>     var myChart31 = "charts/stationary_sp.json";
    vegaEmbed('#chart31', myChart31);
  </script>
</div>

<p>Post their transformations, both series have a p-value less than 0.000 in a Dickey Fuller test with the null hypothesis of non-stationarity, indicating that the chance of this series occuring if the underlying variable is stationary is less than 0.1%. I therefore interpreted this as them being stationary.</p>

<p>Already, work is being done involving opinion dynamics in automated trading, but it could be considered that this is more applicable in more specific basis like cryptocurrencies and instances like the Gamestop short squeeze.</p>





<h3>References:</h3>
<p>PRAW: <a href="https://praw.readthedocs.io/en/stable/">read the docs</a></p>
<p>Pushift PRAW: <a href="https://github.com/pushshift/api">read the docs</a></p>
<p><a href="https://www.analyticsvidhya.com/"></a>Analytics Vidyha</p>
<p>TextBlob: <a href="https://textblob.readthedocs.io/en/dev/">read the docs</a></p>
<p>David Little at Arizona State University: <a href="https://github.com/UnitForDataScience/Reddit_Sentiment">Reddit Sentiment</a></p>

<h3>Appendix:</h3>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>DateTime</th>
      <th>text</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2022-01-07 16:13:23</td>
      <td>Roblox (RBLX) Stock Plunges 7% on China App Removal, Seen as 'Incremental Unforeseen Headwind'Shares of Roblox (NYSE:...</td>
    </tr>
    <tr>
      <td>2022-01-07 15:55:48</td>
      <td>Hedge funds are selling tech shares at their fastest pace in a decadeSurging bond yields have triggered hedge funds...</td>
    </tr>
    <tr>
      <td>2022-01-07 15:55:31</td>
      <td>1 Stock, multiple exchanges?I intend to load up on some MSFT on DeGiro, I am a European citizen.\n\nBeing...</td>
    </tr>
    <tr>
      <td>2022-01-07 15:48:26</td>
      <td>1 year vs trailing 12 months on an income statementI wish I could add photos because it would help alot...</td>
    </tr>
    <tr>
      <td>2022-01-07 15:26:15</td>
      <td>$ACY, Aerocentury corp, an empty shell of grandiose promises.**I am short $ACY, and I think the company is...</td>
    </tr>
  </tbody>
</table>

<p> To compare the sentiment of these posts to the performance of the stock market overall, I chose to consider the closing prices of the S&P500, both because it is an index and because about half of Reddit's users are from US. As I'm particularly interested in how online sentiment creates changes in the stock market, I calculated the percentage changes in this<a href="https://colab.research.google.com/drive/1gjyODYkXdZDXh5aABt-9P6aRxgJhkHfq?usp=sharing"> colab notebook</a>.</p>

<!--Chart 24 - first sentiment polarity -->
<div class="chart" id="chart24">
  <script>     var myChart24 = "charts/SP_Pct_Chn.json";
    vegaEmbed('#chart24', myChart24);
  </script>
</div>

<!--Chart 21 - first sentiment polarity -->

<p>I then performed some data processing in Stata for the largest possible dataset for r/stocks (982 text posts), in order to find the daily average polarity score, the code for which can be found <a href="https://github.com/poppaea-jr/poppaea-jr.github.io/blob/main/daily_polarity.do">here</a>.</p>
<!--Chart 27 - first sentiment polarity -->
<div class="chart" id="chart27">
  <script>     var myChart27 = "charts/daily_r_stocks.json";
    vegaEmbed('#chart27', myChart27);
  </script>
</div>

<p>In order to compare variations in sentiment with those in the market, I computed the percentage changes in sentiment between days against the same for the S&P500 index, in the following <a href="https://colab.research.google.com/drive/1olLnjS3A79EPddlX6vA_BRsR3GQCT6Iv?usp=sharing">Colab notebook.</a></p>

<!--Chart 28 - first sentiment polarity -->
<div class="chart" id="chart28">
  <script>     var myChart28 = "charts/sen_pol.json";
    vegaEmbed('#chart28', myChart28);
  </script>
</div>



<p> </p>
<div class="chart" id="chart30">
  <script>     var myChart30 = "charts/aug_jan.json";
    vegaEmbed('#chart30', myChart30);
  </script>
</div>

<p>The S&P time series for the time period I considered only required first differencing to reach stationarity, see the <a href="https://colab.research.google.com/drive/1on3DUZ9Cl-rJkkyHkp80oRrUaIr_zgXS?usp=sharing">Colab notebook</a>.</p>

<div class="chart" id="chart32">
  <script>     var myChart32 = "charts/2021_stat_sp.json";
    vegaEmbed('#chart32', myChart32);
  </script>
</div>

<p>(This chart has polarity scores for the last month (08/12/2021 - 08/01/2022), but the loop took around 2 hours to run. See the <a href="https://colab.research.google.com/drive/1eXVo8NEg0AIMauVrTx4TkMDASwHuXQ9B?usp=sharing">Colab notebook.</a>)</p>
<!--Chart 29 - first sentiment polarity -->
<div class="chart" id="chart29">
  <script>     var myChart29 = "charts/first_reg.json";
    vegaEmbed('#chart29', myChart29);
  </script>
</div>

</body>
</html>
